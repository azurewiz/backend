@startuml ProductRecognition
title Product Scanner System - Class Diagram

class Product {
    -Long id
    -String barcode
    -String name
    -String brand
    -BigDecimal price
    -String imageUrl
    -LocalDateTime createdAt
    -LocalDateTime updatedAt
}

class ProductRepository {
    +Optional<Product> findByBarcode(String barcode)
    +Product save(Product product)
}

class ProductService {
    +Product getProductByBarcode(String barcode)
    +Product addProduct(Product product)
}

class ProductController {
    +ResponseEntity<Product> getProductByBarcode(String barcode)
    +ResponseEntity<Product> uploadProductImage(MultipartFile image)
}

class BarcodeRecognitionService {
    +String detectBarcode(BufferedImage image)
}

class ImageRecognitionService {
    +Boolean detectProductInImage(String imagePath)
    +String recognizeProductName(BufferedImage image)
}

class ExternalProductApiService {
    +Product fetchProductByBarcode(String barcode)
}

class User {
    -Long id
    -String email
    -String username
    -String password
    -Boolean isVerified
    -String otp
    -Role role
}

class AuthService {
    +String register(User user)
    +String login(String email, String password)
    +Boolean verifyOtp(String email, String otp)
}

ProductService --> ProductRepository
ProductController --> ProductService
ProductService --> ExternalProductApiService
ProductService --> BarcodeRecognitionService
ProductService --> ImageRecognitionService

ImageRecognitionService --> BarcodeRecognitionService

AuthService --> User
ProductController --> AuthService

@enduml
